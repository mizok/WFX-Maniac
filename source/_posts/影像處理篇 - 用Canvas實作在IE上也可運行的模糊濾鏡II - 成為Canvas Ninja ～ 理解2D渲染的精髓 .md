---
title: Day 26 - 影像處理篇 - 用Canvas實作在IE上也可運行的模糊濾鏡II - 成為Canvas Ninja ～ 理解2D渲染的精髓
categories: 
- 前端技術學習心得
tags:
- 2021鐵人賽
---

![img](https://i.imgur.com/Nw30hOS.jpg)

在這篇文章中，我們要來實作上一篇提到的圖像模糊演算法～

在開始之前，因為有個小狀況是上一篇文中我們沒有提到的，我們要先稍微講解一下 --- 也就是`邊緣像素`的處理

# 什麼是邊緣像素？

我們在上一篇有提到，圖像模糊的運算方式其實就是透過`卷積核`上面的`權重`去把每個像素做`加權運算`。

BUT(就是這個BUT)，那如果今天我們Loop處理到圖像邊邊的像素，就會出現這種狀況:

![img](https://i.imgur.com/0TpB8m0.jpg)

像這樣的狀況，也就是剛好loop到`卷積核`有一部分沒有完全涵蓋到圖像的時候，我們把它稱為`Edge Case`

大部分`Edge Case`的應對方式會因應當前像素的位置而有微差異。

下面這種是比較常見的作法。

-  假設這是一個圖像的像素群

````javascript
 0  1  2  3  4  5  6  7  8  9
10 11 12 13 14 15 16 17 18 19
20 21 22 23 24 25 26 27 28 29
30 31 32 33 34 35 36 37 38 39
40 41 42 43 44 45 46 47 48 49
50 51 52 53 54 55 56 57 58 59
60 61 62 63 64 65 66 67 68 69
70 71 72 73 74 75 76 77 78 79
80 81 82 83 84 85 86 87 88 89
90 91 92 93 94 95 96 97 98 99

````

- 如果現在我們要做最左上角的那個像素的加權運算, 也就是0位的像素(假設`卷積核`大小是`3x3`)，那麼其實可以把0位的這個像素，周圍的情形視為這樣：

````javascript
 0  0  1
 0  0  1
10 10 11
````

也就是把周圍的像素往原本不存在圖樣的地方做`假性`的填補，當然這部分我們不會實際畫出來，而是會設法用迴圈作加減。


這麼一來，就能最大限度地解決`邊緣像素`的問題。


# 開始程式實作

github Repo : https://github.com/mizok/ithelp2021/blob/master/src/js/blur/index.js

github Page:  https://mizok.github.io/ithelp2021/blur.html






